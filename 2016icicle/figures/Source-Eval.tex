%!TEX root = ../Main.tex

\begin{figure*}

$$
\boxed{\BigstepFive{\ov{\Gamma}}{\Gamma}{x}{\ov{v}}{v}}
$$


$$
\ruleI
{
    \ov{v} ~=~ [ v' ~|~ n ~=~ v' ~\in~ \gamma,~ \gamma ~\in~ \ov{\Gamma} ]
    \quad
    n ~=~ v ~\in~ \Gamma
}
{ 
    \BigstepFive{\ov{\Gamma}}{\Gamma}{n}{\ov{v}}{v}
}
\textrm{(EvVar)}
$$

$$
\ruleI
{
    \BigstepFiveG{x}{\ov{v_x}}{v_x}
    \quad
    \BigstepFive{[ n~=~v',~\gamma ~|~ v' ~\in~ \ov{v_x},~\gamma ~\in~ \ov{\Gamma}]}{n=v_x,~\Gamma,~n~=~v_x}{c}{\ov{v_c}}{v_c}
}
{
    \BigstepFiveG{@let@~n~@=@~x~\flowsinto~c}{\ov{v_c}}{v_c}
}
\textrm{(EvLet)}
$$

$$
\ruleI
{
    \BigstepFiveG{p}{\ov{v_p}}{\_}
    \quad
    \BigstepFive{[\gamma ~|~ @True@ ~\in~ \ov{v_p},~ \gamma ~\in~ \ov{\Gamma} ]}{\Gamma}{c}{\ov{v_c}}{v_c}
}
{
    \BigstepFiveG{@filter@~p~\flowsinto~c}{\ov{v_c}}{v_c}
}
\textrm{(EvFilter)}
$$

$$
\ruleI
{
    \BigstepFive{[]}{\Gamma}{z}{\_}{v_z}
    \quad
    \BigstepFive{[]}{n~@=@~v_z,~\Gamma}{c}{\_}{v_c}
}
{
    \BigstepFive{[]}{\Gamma}{@fold@~n~@=@~z@;@~k~\flowsinto~c}{[]}{v_c}
}
\textrm{(EvFoldNil)}
$$

$$
\ruleI
{
    \BigstepFive{[\gamma]}{\Gamma}{z}{\_}{v_z}
    \quad
    \BigstepFive{[n~@=@~v_z,~\gamma]}{\Gamma}{k}{\_}{v_k}
    \quad
    \BigstepFive{[n~@=@~v',~\gamma ~|~ v' ~\in~ \ov{v_k},~ \gamma ~\in~ \ov{\Gamma} ]}{n~@=@~v_k,~\Gamma}{c}{\ov{v_c}}{v_c}
}
{
    \BigstepFive{[\gamma] ~@++@~ \ov{\Gamma}}{\Gamma}{@fold@~n~@=@~z@;@~k~\flowsinto~c}{\ov{v_c}}{v_c}
}
\textrm{(EvFoldCons)}
$$

\caption{Evaluation rules}
\label{fig:source:eval}
\end{figure*}



%!TEX root = ../Main.tex

\begin{figure}

\begin{tabbing}
MMMM \= Mx \= MMMMMMMMMMM \= \kill
$\tau$          \> $::=$  \> $\NN~|~\BB$ \\
\\
$\mi{Table}$    \> $::=$  \> $@table@~n~\{(n~:~\tau)*\}$ \\
\\
$\mi{Exp}$
    \> $::=$  \> $n$          \\
    \> $~|$ \> $v$     \\
    \> $~|$ \> $(\mi{Prim}~|~n)$     \> $([\mi{Clock}]~|~\mi{Exp})+$ \\
\\
    \> $~|$ \> $@let@~n~@=@~\mi{Exp}$
            \> $@in@~\mi{Exp}$ \\
                \\
    \> $~|$ \> $@fold@[\mi{Clock}]$ \\
    \>      \> $n~@=@~\mi{Exp}~@then@~\mi{Exp}$
\\
\\
$\mi{Prim}$
    \> $::=$  \> $@+@~|~@>@$ \\
\\
$\mi{Clock}$
    \> $::=$  \> $n$          \\
    \> $~|$ \> $\mi{Clock}~@where@~\mi{Exp}$          \\
\\
$\mi{Function}$
    \> $::=$  \> $@function@~n~([n])*~(n~:~\tau)*~=~\mi{Exp}$.          \\

$\mi{Query}$
    \> $::=$  \> $@query@~n~[n]~=~\mi{Exp}$.          \\
\\
$\mi{Program}$
    \> $::=$  \> $\mi{Table}~(\mi{Function}~|~\mi{Query})*$ \\
\end{tabbing}

\ben{Should the Function and Query forms really mention Clock expressions instead of [n]?}

\caption{Grammar for Icicle Source}
\label{fig:source:grammar}
\end{figure}


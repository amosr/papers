%!TEX root = ../Main.tex

\begin{figure}

$$
  \boxed{
    \ProcsFeed
      {\MapType{\Chan}{[\Value]}}
      {\sgl{\Proc}}
      {\MapType{\Chan}{[\Value]}}
      {\sgl{\Proc}}
  }
$$

\newcommand\vs {\ti{vs}}
\newcommand\accs {\ti{accs}}
\newcommand\network {\ti{ps}}

$$
\ruleIN{
  \forall c \in \accs.~
  \accs~c~=~[]
}{
  \ProcsFeed
    {\accs}
    {\network}
    {\accs}
    {\network}
}{FeedStart}
%
\ruleIN{
  \ProcsFeed
    {\accs}
    {\network}
    {\accs'}
    {\network'}
\quad
  \ProcsShake
    {\network'}
    {\tau}
    {\network''}
}{
  \ProcsFeed
    {\accs}
    {\network}
    {\accs'}
    {\network''}
}{FeedInternal}
$$

$$
\ruleIN{
  \ProcsFeed
    {\accs}
    {\network}
    {\accs'}
    {\network'}
\quad
  \ProcsShake
    {\network'}
    {\Push~c~v}
    {\network''}
}{
  \ProcsFeed
    {\accs}
    {\network}
    {c=\accs'~c \listappend [v], \accs'}
    {\network''}
}{FeedPush}
$$

$$
\ruleIN{
  (\forall p \in \network.~c \not\in @outs@~p)
\quad
  \ProcsFeed
    {c=\vs, \accs}
    {\network}
    {\accs'}
    {\network'}
\quad
  \ProcsInject
    {\network'}
    {c}{v}
    {\network''}
}{
  \ProcsFeed
    {c=\vs \listappend [v], \accs}
    {\network}
    {c=\vs \listappend [v], \accs'}
    {\network''}
}{FeedExternal}
$$


\caption{Evaluation: feeding evaluates a process network on a list of input values and collects the outputs.
Feeding alternates between injecting input values and shaking the processes to collect the output messages.}
\label{fig:Process:Eval:Feed}
\end{figure}

